# 簡易仕様書

### 作者
ピピトネ ガブリエレ
### アプリ名
Restaurant　Search

#### コンセプト
自分の周りにどんなレストランあるのかを検索したうえで、簡単にマップアプリと繋げるようにしました。

#### こだわったポイント
検索地域を指定できるようにしました。
地域情報が見つからない場合はクラッシュせずにできるだけ取得するように設定しました。
お店一覧に何メートル離れているか表示するようにしています。
APIキーをリポジトリ内に隠せるようにしましたし、apkのリバースエンジニアリング対策も設定しています。
可能な限り、ユーザーが困らないように分かりやすい構成になっているうえで、プログレスバーでビジュアルフィードバックを工夫しています。
アンドロイド開発の初心者でも、早く理解してくれるようにメソッドの構成・問題解決方法・開発参考資料に関しての説明をたくさん入れました。

### 該当プロジェクトのリポジトリ URL（GitHub）
https://github.com/gabry0132/RestaurantSearch

## 開発環境
Android Studio Meerkat | 2024.3.1　(Gradle 8.11.1)

### 開発言語
Java 21
Android minSDK: 24

## 動作対象端末・OS
#### 動作対象端末
Pixel 8
#### OS
Android 14.0

## 開発期間
3日間アンドロイドの勉強 + 4日間開発 + 1日APKのデプロイ準備と修正

## アプリケーション機能

### 機能一覧
- レストラン検索：ホットペッパーグルメサーチAPIを使用して、選択された地域周辺の飲食店を検索する。
- 検索地域の指定：現在地に加えて、国内３つの最大都市の特定地域とユーザーが自由に座標を入力できるようになっています。
- ページングとクエリ項目の保存：ユーザーが何も壊せないように特別に注意しました。データ取得の準備の所も細かく作りました。
- ウエブサイトとの連結：実際に予約しようと思ったら、簡単にホットペッパーグルメサイトへ移動させる方法を導入しています。
- 地図アプリとの連結：気になったお店までの案内が簡単に表示できますし、自分で座標を入力しようと思ったら地図アプリで確認しやすくなっています。

### 画面一覧
- 検索画面 ：条件を指定してレストランを検索する。
- 一覧画面 ：検索結果の飲食店を一覧表示する + 検索条件の再設定も可。
- レストラン詳細画面 ：店の詳しい情報を確認して、地図の案内か予約するためにWebページに移動する

### 使用しているAPI,SDK,ライブラリなど
- ホットペッパーグルメサーチAPI
- Volley (APIにリクエストするため)
- Glide (画像を表示するため)
- Play Services Location (位置情報を取得するため)

### 技術面でアドバイスして欲しいポイント
- デザインが不得意のままで申し訳ありません。ボタンのレイアウトはなんとなくなるんですが、レストラン詳細画面でスクロールができるときにどうやってユーザーに伝えるのか分かりませんでした。下のボタンが切れているときに不自然だと感じられてしまいます。
- 最初に立ち上がった状態で取得する位置情報が古い可能性があります。地図アプリのように強制取得を入れたいです。
- 座標を入力するのが不便です。本当は地図を開いて、マーカーを入れて、それで取得することが欲しかったですが、最近Google Maps Apiは有料になりましたし、apkからAPIキーが求められるそうなのでやめておきました。
- なぜかわかりませんが、APIは「name_any」(店舗名)で検索すると「budget」（予算）項目が無視されます。本番であれば店舗名で検索して、予算でフィルタリングをするのではないかと思います。
- たまにお店の詳細情報の項目データがないこともあります（特にお店のジャンル）。なので場合によるレイアウトを調整する必要があり、その調整を正しくしても下の方へスクロールして、上に戻ったら自分で入れた隙間がなくなることがあります。（データベース全体を分析して、それに応じて問題にならないレイアウトを考え直す？）
- お店の電話番号がAPIから直接取得できないようです。ホットペッパーのウエブサイトを利用して /店舗ID/tel で検索するとHTMLに直接入っていますのでJSoup等で取得したかったのですが、法律上とホットペッパーのToSから見るとどこまでウェブスクレイピングしても大丈夫かわからないため諦めました。
- ダークモードの対応もしたかったですが、結果がとても醜い状態でしたのでカットしました。
- もっと幅広いデバイスにテストしたかったです。レイアウトもそうですけれども、アンドロイドの独特なSkin (GalaxyのOneUIやOppoのColorOS等)で実行するときの変わった動きが発生するかどうかデバイスがないと確認しにくいです（エミュレータだけで不十分な所があります）。